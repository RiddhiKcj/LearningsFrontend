{"remainingRequest":"/home/riddhi/Desktop/learnings/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/riddhi/Desktop/learnings/frontend/src/components/Signin.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/riddhi/Desktop/learnings/frontend/src/components/Signin.vue","mtime":1574771198987},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/css-loader/dist/cjs.js","mtime":1574162604976},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1574162606994},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/postcss-loader/src/index.js","mtime":1574162606108},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1574163471880},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1574162603991},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/vue-loader/lib/index.js","mtime":1574162606994}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpsYWJlbHsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKfQoudi10b29sYmFyX19jb250ZW50ewogIGp1c3RpZnktY29udGVudDogY2VudGVyOwp9Ci52YWN0aW9uewogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIG1hcmdpbjogMzBweDsKICBwYWRkaW5nOiBhdXRvOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQo="},{"version":3,"sources":["Signin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Signin.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-content>\n    <v-container class=\"fill-height\" fluid>\n      <v-row align=\"center\" justify=\"center\">\n        <v-col cols=\"12\" sm=\"8\" md=\"4\">\n          <v-card class=\"elevation-12\">\n            <v-toolbar dark flat>\n              <v-toolbar-title>\n                <v-spacer />\n                TESTAPP LOGIN\n              </v-toolbar-title>\n            </v-toolbar>\n            <v-card-text>\n              <v-dialog v-model=\"dialog\" max-width=\"400\">\n                  <v-card>\n                    <v-card-title>   </v-card-title>\n                    <v-card-text>\n                      <h4 style=\"color:rgb(196, 19, 19)\">{{ error }}</h4>\n                    </v-card-text>\n                    <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"green darken-1\" text @click=\"dialog = false\" >\n                      OK\n                    </v-btn>\n                  </v-card-actions>\n                </v-card>\n              </v-dialog>\n              <v-form  @submit.prevent=\"signin\">\n                <v-text-field outlined v-model=\"email\" type=\"email\" label=\"Email\" :rules=\"[rules.required]\"></v-text-field>  \n                <v-text-field outlined v-model=\"password\" label=\"Password\"\n                  :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\"\n                  :rules=\"[rules.required, rules.min]\"\n                  :type=\"show1 ? 'text' : 'password'\"\n                  hint=\"At least 6 characters\"\n                  counter\n                  @click:append=\"show1 = !show1\"></v-text-field>\n              </v-form>\n            </v-card-text>\n            <v-card-actions>\n              <v-spacer />\n              <v-btn color=\"primary\" @click=\"signin()\">Login</v-btn>\n              \n            </v-card-actions>\n\n          </v-card>\n            <p>        </p>\n            <div class=\"vaction\">\n              <v-btn text outlined small to=\"/signup\">Sign up</v-btn>\n            </div>\n            <p style=\"text-align: center; color: rgba(0, 0, 0, 0.54);\"> Or Login Using</p>\n            <p style=\"text-align: center; justify-content: center;\">\n              <v-btn text icon color=\"primary\" @click=\"handleClickSignIn\" v-if=\"!isSignIn\">\n              <v-icon>mdi-google</v-icon>\n              </v-btn>\n              <v-btn text icon color=\"primary\" @click=\"handleClickSignOut\" v-if=\"isSignIn\">\n                <v-icon>mdi-google</v-icon>out\n              </v-btn>\n            </p>\n\n        </v-col>\n      </v-row>\n\n    </v-container>\n  </v-content>\n\n  </template>\n  \n  <script>\n  export default {\n    name: 'Signin',\n    data () {\n      return {\n        email: '',\n        password: '',\n        error: '',\n        isSignIn: false,\n        dialog: false,\n        show1: false,\n        rules: {\n          required: value => !!value || 'Required.',\n          min: v => v.length >= 6 || 'Min 6 characters',\n        },\n        idtoken: '',\n        accesstoken: ''\n      }\n    },\n    created () {\n      this.checkSignedIn()\n    },\n    updated () {\n      this.checkSignedIn()\n    },\n    methods: {\n      signin () {\n        \n        if (this.email == ''){\n          this.error = \"Email cannot be blank\"\n          this.dialog = true\n          return\n        }\n        if (this.password == ''){\n          this.error = \"Password cannot be blank\"\n          this.dialog = true\n          return\n        }\n        this.$http.plain.post('/signin', { email: this.email, password: this.password })\n          .then(response => this.signinSuccessful(response))\n          .catch(error => this.signinFailed(error))\n      },\n      signinSuccessful (response) {\n        console.log(\"response : \"+ response)\n        console.log(\"data: \" + response.data)\n        if (!response.data.csrf) {\n          this.signinFailed(response)\n          return\n        }\n        localStorage.csrf = response.data.csrf\n        localStorage.access = response.data.access\n        localStorage.signedIn = true\n        this.error = ''\n        this.$router.replace('/todos')\n      },\n      signinFailed (error) {\n        console.log('error: '+ error)\n        console.log(error.response)\n        this.error = (error.response || error.response.data || error.response.data.error) || ''\n        if (this.error !== ''){\n          this.dialog = true\n        }\n        delete localStorage.csrf\n        delete localStorage.access\n        delete localStorage.signedIn\n      },\n      checkSignedIn () {\n        if (localStorage.signedIn) {\n          this.$router.replace('/todos')\n        }\n      },\n      handleClickSignIn() {\n      \n      this.$gAuth\n        .signIn()\n        .then(GoogleUser => {\n          //on success do something\n          var authRes = GoogleUser.getAuthResponse()\n          this.idtoken = authRes.id_token\n          this.accesstoken = authRes.access_token\n          console.log(\"GoogleUser\", GoogleUser);\n          console.log(\"getAuthResponse\", this.$gAuth.GoogleAuth.currentUser.get().getAuthResponse());\n          this.isSignIn = this.$gAuth.isAuthorized; \n          this.$http.secured.post('/oauth/gauth', { idtoken: this.idtoken, accesstoken: this.accesstoken})\n          .then(response => this.signinSuccessful(response))\n          .then(payload => {\n            console.log('JWT Payload', payload);\n            console.log(payload.userId);\n          })\n          .catch(error => this.signinFailed(error))\n        })\n        .catch(error => {\n          //on fail do something\n          console.log(error)\n          this.error = error\n          if (this.error !== ''){\n            this.dialog = true\n          }\n        });\n    },\n    handleClickSignOut(){\n      this.$gAuth.signOut()\n      .then(() => {\n        // On success do something\n        this.isSignIn = this.$gAuth.isAuthorized\n      })\n      .catch(error  => {\n        // On fail do something\n        this.error = error\n        if (this.error !== ''){\n          this.dialog = true\n        }\n      })\n    } \n    }\n    \n  }\n  </script>\n  \n  <style lang=\"css\">\n\n  label{\n      text-align: center;\n  }\n  .v-toolbar__content{\n    justify-content: center;\n  }\n  .vaction{\n    justify-content: center;\n    margin: 30px;\n    padding: auto;\n    text-align: center;\n  }\n  </style>\n  "]}]}