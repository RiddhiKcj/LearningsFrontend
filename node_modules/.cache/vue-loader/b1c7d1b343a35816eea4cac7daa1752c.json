{"remainingRequest":"/home/riddhi/Desktop/learnings/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/riddhi/Desktop/learnings/frontend/src/components/Signin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/riddhi/Desktop/learnings/frontend/src/components/Signin.vue","mtime":1574771198987},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1574162603991},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/babel-loader/lib/index.js","mtime":1574162576952},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1574163471880},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1574162603991},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/vue-loader/lib/index.js","mtime":1574162606994}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2lnbmluJywKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGVtYWlsOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBlcnJvcjogJycsCiAgICAgIGlzU2lnbkluOiBmYWxzZSwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgc2hvdzE6IGZhbHNlLAogICAgICBydWxlczogewogICAgICAgIHJlcXVpcmVkOiB2YWx1ZSA9PiAhIXZhbHVlIHx8ICdSZXF1aXJlZC4nLAogICAgICAgIG1pbjogdiA9PiB2Lmxlbmd0aCA+PSA2IHx8ICdNaW4gNiBjaGFyYWN0ZXJzJywKICAgICAgfSwKICAgICAgaWR0b2tlbjogJycsCiAgICAgIGFjY2Vzc3Rva2VuOiAnJwogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLmNoZWNrU2lnbmVkSW4oKQogIH0sCiAgdXBkYXRlZCAoKSB7CiAgICB0aGlzLmNoZWNrU2lnbmVkSW4oKQogIH0sCiAgbWV0aG9kczogewogICAgc2lnbmluICgpIHsKICAgICAgCiAgICAgIGlmICh0aGlzLmVtYWlsID09ICcnKXsKICAgICAgICB0aGlzLmVycm9yID0gIkVtYWlsIGNhbm5vdCBiZSBibGFuayIKICAgICAgICB0aGlzLmRpYWxvZyA9IHRydWUKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBpZiAodGhpcy5wYXNzd29yZCA9PSAnJyl7CiAgICAgICAgdGhpcy5lcnJvciA9ICJQYXNzd29yZCBjYW5ub3QgYmUgYmxhbmsiCiAgICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgdGhpcy4kaHR0cC5wbGFpbi5wb3N0KCcvc2lnbmluJywgeyBlbWFpbDogdGhpcy5lbWFpbCwgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB0aGlzLnNpZ25pblN1Y2Nlc3NmdWwocmVzcG9uc2UpKQogICAgICAgIC5jYXRjaChlcnJvciA9PiB0aGlzLnNpZ25pbkZhaWxlZChlcnJvcikpCiAgICB9LAogICAgc2lnbmluU3VjY2Vzc2Z1bCAocmVzcG9uc2UpIHsKICAgICAgY29uc29sZS5sb2coInJlc3BvbnNlIDogIisgcmVzcG9uc2UpCiAgICAgIGNvbnNvbGUubG9nKCJkYXRhOiAiICsgcmVzcG9uc2UuZGF0YSkKICAgICAgaWYgKCFyZXNwb25zZS5kYXRhLmNzcmYpIHsKICAgICAgICB0aGlzLnNpZ25pbkZhaWxlZChyZXNwb25zZSkKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBsb2NhbFN0b3JhZ2UuY3NyZiA9IHJlc3BvbnNlLmRhdGEuY3NyZgogICAgICBsb2NhbFN0b3JhZ2UuYWNjZXNzID0gcmVzcG9uc2UuZGF0YS5hY2Nlc3MKICAgICAgbG9jYWxTdG9yYWdlLnNpZ25lZEluID0gdHJ1ZQogICAgICB0aGlzLmVycm9yID0gJycKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoJy90b2RvcycpCiAgICB9LAogICAgc2lnbmluRmFpbGVkIChlcnJvcikgewogICAgICBjb25zb2xlLmxvZygnZXJyb3I6ICcrIGVycm9yKQogICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSkKICAgICAgdGhpcy5lcnJvciA9IChlcnJvci5yZXNwb25zZSB8fCBlcnJvci5yZXNwb25zZS5kYXRhIHx8IGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpIHx8ICcnCiAgICAgIGlmICh0aGlzLmVycm9yICE9PSAnJyl7CiAgICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlCiAgICAgIH0KICAgICAgZGVsZXRlIGxvY2FsU3RvcmFnZS5jc3JmCiAgICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2UuYWNjZXNzCiAgICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2Uuc2lnbmVkSW4KICAgIH0sCiAgICBjaGVja1NpZ25lZEluICgpIHsKICAgICAgaWYgKGxvY2FsU3RvcmFnZS5zaWduZWRJbikgewogICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvdG9kb3MnKQogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xpY2tTaWduSW4oKSB7CiAgICAKICAgIHRoaXMuJGdBdXRoCiAgICAgIC5zaWduSW4oKQogICAgICAudGhlbihHb29nbGVVc2VyID0+IHsKICAgICAgICAvL29uIHN1Y2Nlc3MgZG8gc29tZXRoaW5nCiAgICAgICAgdmFyIGF1dGhSZXMgPSBHb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSgpCiAgICAgICAgdGhpcy5pZHRva2VuID0gYXV0aFJlcy5pZF90b2tlbgogICAgICAgIHRoaXMuYWNjZXNzdG9rZW4gPSBhdXRoUmVzLmFjY2Vzc190b2tlbgogICAgICAgIGNvbnNvbGUubG9nKCJHb29nbGVVc2VyIiwgR29vZ2xlVXNlcik7CiAgICAgICAgY29uc29sZS5sb2coImdldEF1dGhSZXNwb25zZSIsIHRoaXMuJGdBdXRoLkdvb2dsZUF1dGguY3VycmVudFVzZXIuZ2V0KCkuZ2V0QXV0aFJlc3BvbnNlKCkpOwogICAgICAgIHRoaXMuaXNTaWduSW4gPSB0aGlzLiRnQXV0aC5pc0F1dGhvcml6ZWQ7IAogICAgICAgIHRoaXMuJGh0dHAuc2VjdXJlZC5wb3N0KCcvb2F1dGgvZ2F1dGgnLCB7IGlkdG9rZW46IHRoaXMuaWR0b2tlbiwgYWNjZXNzdG9rZW46IHRoaXMuYWNjZXNzdG9rZW59KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHRoaXMuc2lnbmluU3VjY2Vzc2Z1bChyZXNwb25zZSkpCiAgICAgICAgLnRoZW4ocGF5bG9hZCA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygnSldUIFBheWxvYWQnLCBwYXlsb2FkKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHBheWxvYWQudXNlcklkKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB0aGlzLnNpZ25pbkZhaWxlZChlcnJvcikpCiAgICAgIH0pCiAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgLy9vbiBmYWlsIGRvIHNvbWV0aGluZwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcgogICAgICAgIGlmICh0aGlzLmVycm9yICE9PSAnJyl7CiAgICAgICAgICB0aGlzLmRpYWxvZyA9IHRydWUKICAgICAgICB9CiAgICAgIH0pOwogIH0sCiAgaGFuZGxlQ2xpY2tTaWduT3V0KCl7CiAgICB0aGlzLiRnQXV0aC5zaWduT3V0KCkKICAgIC50aGVuKCgpID0+IHsKICAgICAgLy8gT24gc3VjY2VzcyBkbyBzb21ldGhpbmcKICAgICAgdGhpcy5pc1NpZ25JbiA9IHRoaXMuJGdBdXRoLmlzQXV0aG9yaXplZAogICAgfSkKICAgIC5jYXRjaChlcnJvciAgPT4gewogICAgICAvLyBPbiBmYWlsIGRvIHNvbWV0aGluZwogICAgICB0aGlzLmVycm9yID0gZXJyb3IKICAgICAgaWYgKHRoaXMuZXJyb3IgIT09ICcnKXsKICAgICAgICB0aGlzLmRpYWxvZyA9IHRydWUKICAgICAgfQogICAgfSkKICB9IAogIH0KICAKfQo="},{"version":3,"sources":["Signin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Signin.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-content>\n    <v-container class=\"fill-height\" fluid>\n      <v-row align=\"center\" justify=\"center\">\n        <v-col cols=\"12\" sm=\"8\" md=\"4\">\n          <v-card class=\"elevation-12\">\n            <v-toolbar dark flat>\n              <v-toolbar-title>\n                <v-spacer />\n                TESTAPP LOGIN\n              </v-toolbar-title>\n            </v-toolbar>\n            <v-card-text>\n              <v-dialog v-model=\"dialog\" max-width=\"400\">\n                  <v-card>\n                    <v-card-title>   </v-card-title>\n                    <v-card-text>\n                      <h4 style=\"color:rgb(196, 19, 19)\">{{ error }}</h4>\n                    </v-card-text>\n                    <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"green darken-1\" text @click=\"dialog = false\" >\n                      OK\n                    </v-btn>\n                  </v-card-actions>\n                </v-card>\n              </v-dialog>\n              <v-form  @submit.prevent=\"signin\">\n                <v-text-field outlined v-model=\"email\" type=\"email\" label=\"Email\" :rules=\"[rules.required]\"></v-text-field>  \n                <v-text-field outlined v-model=\"password\" label=\"Password\"\n                  :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\"\n                  :rules=\"[rules.required, rules.min]\"\n                  :type=\"show1 ? 'text' : 'password'\"\n                  hint=\"At least 6 characters\"\n                  counter\n                  @click:append=\"show1 = !show1\"></v-text-field>\n              </v-form>\n            </v-card-text>\n            <v-card-actions>\n              <v-spacer />\n              <v-btn color=\"primary\" @click=\"signin()\">Login</v-btn>\n              \n            </v-card-actions>\n\n          </v-card>\n            <p>        </p>\n            <div class=\"vaction\">\n              <v-btn text outlined small to=\"/signup\">Sign up</v-btn>\n            </div>\n            <p style=\"text-align: center; color: rgba(0, 0, 0, 0.54);\"> Or Login Using</p>\n            <p style=\"text-align: center; justify-content: center;\">\n              <v-btn text icon color=\"primary\" @click=\"handleClickSignIn\" v-if=\"!isSignIn\">\n              <v-icon>mdi-google</v-icon>\n              </v-btn>\n              <v-btn text icon color=\"primary\" @click=\"handleClickSignOut\" v-if=\"isSignIn\">\n                <v-icon>mdi-google</v-icon>out\n              </v-btn>\n            </p>\n\n        </v-col>\n      </v-row>\n\n    </v-container>\n  </v-content>\n\n  </template>\n  \n  <script>\n  export default {\n    name: 'Signin',\n    data () {\n      return {\n        email: '',\n        password: '',\n        error: '',\n        isSignIn: false,\n        dialog: false,\n        show1: false,\n        rules: {\n          required: value => !!value || 'Required.',\n          min: v => v.length >= 6 || 'Min 6 characters',\n        },\n        idtoken: '',\n        accesstoken: ''\n      }\n    },\n    created () {\n      this.checkSignedIn()\n    },\n    updated () {\n      this.checkSignedIn()\n    },\n    methods: {\n      signin () {\n        \n        if (this.email == ''){\n          this.error = \"Email cannot be blank\"\n          this.dialog = true\n          return\n        }\n        if (this.password == ''){\n          this.error = \"Password cannot be blank\"\n          this.dialog = true\n          return\n        }\n        this.$http.plain.post('/signin', { email: this.email, password: this.password })\n          .then(response => this.signinSuccessful(response))\n          .catch(error => this.signinFailed(error))\n      },\n      signinSuccessful (response) {\n        console.log(\"response : \"+ response)\n        console.log(\"data: \" + response.data)\n        if (!response.data.csrf) {\n          this.signinFailed(response)\n          return\n        }\n        localStorage.csrf = response.data.csrf\n        localStorage.access = response.data.access\n        localStorage.signedIn = true\n        this.error = ''\n        this.$router.replace('/todos')\n      },\n      signinFailed (error) {\n        console.log('error: '+ error)\n        console.log(error.response)\n        this.error = (error.response || error.response.data || error.response.data.error) || ''\n        if (this.error !== ''){\n          this.dialog = true\n        }\n        delete localStorage.csrf\n        delete localStorage.access\n        delete localStorage.signedIn\n      },\n      checkSignedIn () {\n        if (localStorage.signedIn) {\n          this.$router.replace('/todos')\n        }\n      },\n      handleClickSignIn() {\n      \n      this.$gAuth\n        .signIn()\n        .then(GoogleUser => {\n          //on success do something\n          var authRes = GoogleUser.getAuthResponse()\n          this.idtoken = authRes.id_token\n          this.accesstoken = authRes.access_token\n          console.log(\"GoogleUser\", GoogleUser);\n          console.log(\"getAuthResponse\", this.$gAuth.GoogleAuth.currentUser.get().getAuthResponse());\n          this.isSignIn = this.$gAuth.isAuthorized; \n          this.$http.secured.post('/oauth/gauth', { idtoken: this.idtoken, accesstoken: this.accesstoken})\n          .then(response => this.signinSuccessful(response))\n          .then(payload => {\n            console.log('JWT Payload', payload);\n            console.log(payload.userId);\n          })\n          .catch(error => this.signinFailed(error))\n        })\n        .catch(error => {\n          //on fail do something\n          console.log(error)\n          this.error = error\n          if (this.error !== ''){\n            this.dialog = true\n          }\n        });\n    },\n    handleClickSignOut(){\n      this.$gAuth.signOut()\n      .then(() => {\n        // On success do something\n        this.isSignIn = this.$gAuth.isAuthorized\n      })\n      .catch(error  => {\n        // On fail do something\n        this.error = error\n        if (this.error !== ''){\n          this.dialog = true\n        }\n      })\n    } \n    }\n    \n  }\n  </script>\n  \n  <style lang=\"css\">\n\n  label{\n      text-align: center;\n  }\n  .v-toolbar__content{\n    justify-content: center;\n  }\n  .vaction{\n    justify-content: center;\n    margin: 30px;\n    padding: auto;\n    text-align: center;\n  }\n  </style>\n  "]}]}