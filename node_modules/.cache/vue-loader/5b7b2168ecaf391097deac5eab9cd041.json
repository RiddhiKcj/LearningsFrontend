{"remainingRequest":"/home/riddhi/Desktop/learnings/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/riddhi/Desktop/learnings/frontend/src/components/todos/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/riddhi/Desktop/learnings/frontend/src/components/todos/List.vue","mtime":1574771198987},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1574162603991},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/babel-loader/lib/index.js","mtime":1574162576952},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1574163471880},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1574162603991},{"path":"/home/riddhi/Desktop/learnings/frontend/node_modules/vue-loader/lib/index.js","mtime":1574162606994}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTGlzdCcsCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICB0b2RvczogW10sCiAgICAgIG5ld1RvZG86IFtdLAogICAgICBlcnJvcjogJycsCiAgICAgIGVkaXRlZFRvZG86ICcnCiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIGlmICghbG9jYWxTdG9yYWdlLnNpZ25lZEluKSB7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvJykKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuJGh0dHAuc2VjdXJlZC5nZXQoJy9hcGkvdjEvdG9kb3MnLHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5hY2Nlc3MKICAgICAgICB9fSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7IHRoaXMudG9kb3MgPSByZXNwb25zZS5kYXRhIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHRoaXMuc2V0RXJyb3IoZXJyb3IsICdTb21ldGhpbmcgd2VudCB3cm9uZycpKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2V0RXJyb3IgKGVycm9yLCB0ZXh0KSB7CiAgICAgIHRoaXMuZXJyb3IgPSAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKSB8fCB0ZXh0CiAgICB9LAogICAgYWRkVG9kbyAoKSB7CiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5uZXdUb2RvICYmIHRoaXMubmV3VG9kby50cmltKCkKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuJGh0dHAuc2VjdXJlZC5wb3N0KCcvYXBpL3YxL3RvZG9zJywgeyB0b2RvOiB7IHRpdGxlOiB0aGlzLm5ld1RvZG8gfSB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuYWNjZXNzCiAgICAgICAgfQogICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMudG9kb3MucHVzaChyZXNwb25zZS5kYXRhKQogICAgICAgICAgdGhpcy5uZXdUb2RvID0gJycKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB0aGlzLnNldEVycm9yKGVycm9yLCAnQ2Fubm90IGNyZWF0ZSB0b2RvJykpCiAgICB9LAogICAgcmVtb3ZlVG9kbyAodG9kbykgewogICAgICB0aGlzLiRodHRwLnNlY3VyZWQuZGVsZXRlKGAvYXBpL3YxL3RvZG9zLyR7dG9kby5pZH1gLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuYWNjZXNzCiAgICAgICAgfQogICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMudG9kb3Muc3BsaWNlKHRoaXMudG9kb3MuaW5kZXhPZih0b2RvKSwgMSkKICAgICAgICAgIHRoaXMuZXJyb3IgPSByZXNwb25zZQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHRoaXMuc2V0RXJyb3IoZXJyb3IsICdDYW5ub3QgZGVsZXRlIHRvZG8nKSkKICAgIH0sCiAgICBlZGl0VG9kbyAodG9kbykgewogICAgICB0aGlzLmVkaXRlZFRvZG8gPSB0b2RvCiAgICB9LAogICAgdXBkYXRlVG9kbyAodG9kbykgewogICAgICB0aGlzLmVkaXRlZFRvZG8gPSAnJwogICAgICB0aGlzLiRodHRwLnNlY3VyZWQucGF0Y2goYC9hcGkvdjEvdG9kb3MvJHt0b2RvLmlkfWAsIHsgdG9kbzogeyB0aXRsZTogdG9kby50aXRsZSB9IH0sIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5hY2Nlc3MKICAgICAgICB9CiAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHRoaXMuc2V0RXJyb3IoZXJyb3IsICdDYW5ub3QgdXBkYXRlIHRvZG8nKSkKICAgIH0sCiAgICBsb2dvdXQgKCl7CiAgICAgIHRoaXMuJGh0dHAuc2VjdXJlZC5kZWxldGUoJy9zaWduaW4nLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuYWNjZXNzCiAgICAgICAgfQogICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgICAgZGVsZXRlIGxvY2FsU3RvcmFnZS5hY2Nlc3MKICAgICAgICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2UuY3NyZgogICAgICAgICAgZGVsZXRlIGxvY2FsU3RvcmFnZS5zaWduZWRJbgogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHRoaXMuc2V0RXJyb3IoZXJyb3IsICdDYW5ub3QgZGVsZXRlIHRvZG8nKSkKICAgIH0KICB9LAogIGRpcmVjdGl2ZXM6IHsKICAgICd0b2RvLWZvY3VzJzogZnVuY3Rpb24gKGVsKSB7CiAgICAgIGVsLmZvY3VzKCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components/todos","sourcesContent":["<template>\n    <div class=\"todos\">\n      <div class=\"alert alert-danger\" v-if=\"error\">{{ error }}</div>\n      <h3>Todos</h3>\n      \n      <input class=\"form-control\"\n        autofocus autocomplete=\"off\"\n        placeholder=\"What needs to be done?\"\n        v-model=\"newTodo\"\n        @keyup.enter=\"addTodo\" />\n      <br />\n      <ul class=\"list-group\">\n        <li class=\"list-group-item\" v-for=\"todo in todos\" :key=\"todo.id\" :todo=\"todo\">\n          <div v-show=\"todo != editedTodo\" @dblclick=\"editTodo(todo)\">\n            <label>{{ todo.title }}</label>\n            <i class=\"fa fa-trash-alt float-right\" @click=\"removeTodo(todo)\"></i>\n          </div>\n          <div v-show=\"todo == editedTodo\">\n            <input class=\"form-control\"\n              v-todo-focus\n              @blur=\"updateTodo(todo)\"\n              @keyup.enter=\"updateTodo(todo)\"\n              v-model=\"todo.title\"\n            />\n          </div>\n        </li>\n      </ul>\n      <v-spacer />\n      <v-btn @click=\"logout()\">Logout</v-btn>\n    </div>\n  </template>\n  \n  <script>\n  export default {\n    name: 'List',\n    data () {\n      return {\n        todos: [],\n        newTodo: [],\n        error: '',\n        editedTodo: ''\n      }\n    },\n    created () {\n      if (!localStorage.signedIn) {\n        this.$router.replace('/')\n      } else {\n        this.$http.secured.get('/api/v1/todos',{\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.access\n          }})\n          .then(response => { this.todos = response.data })\n          .catch(error => this.setError(error, 'Something went wrong'))\n      }\n    },\n    methods: {\n      setError (error, text) {\n        this.error = (error.response && error.response.data && error.response.data.error) || text\n      },\n      addTodo () {\n        const value = this.newTodo && this.newTodo.trim()\n        if (!value) {\n          return\n        }\n        this.$http.secured.post('/api/v1/todos', { todo: { title: this.newTodo } }, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.access\n          }\n        })\n          .then(response => {\n            this.todos.push(response.data)\n            this.newTodo = ''\n          })\n          .catch(error => this.setError(error, 'Cannot create todo'))\n      },\n      removeTodo (todo) {\n        this.$http.secured.delete(`/api/v1/todos/${todo.id}`, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.access\n          }\n        })\n          .then(response => {\n            this.todos.splice(this.todos.indexOf(todo), 1)\n            this.error = response\n          })\n          .catch(error => this.setError(error, 'Cannot delete todo'))\n      },\n      editTodo (todo) {\n        this.editedTodo = todo\n      },\n      updateTodo (todo) {\n        this.editedTodo = ''\n        this.$http.secured.patch(`/api/v1/todos/${todo.id}`, { todo: { title: todo.title } }, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.access\n          }\n        })\n          .catch(error => this.setError(error, 'Cannot update todo'))\n      },\n      logout (){\n        this.$http.secured.delete('/signin', {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.access\n          }\n        })\n          .then(response => {\n            console.log(response)\n            delete localStorage.access\n            delete localStorage.csrf\n            delete localStorage.signedIn\n            this.$router.push('/')\n          })\n          .catch(error => this.setError(error, 'Cannot delete todo'))\n      }\n    },\n    directives: {\n      'todo-focus': function (el) {\n        el.focus()\n      }\n    }\n  }\n  </script>\n  \n  <style lang=\"css\">\n  .todos ul li i.fa.fa-trash-alt {\n    visibility: hidden;\n    margin-top: 5px;\n  }\n  .todos ul li:hover {\n    background: #fcfcfc;\n  }\n  .todos ul li:hover i.fa.fa-trash-alt {\n    visibility: visible;\n  }\n  </style>"]}]}